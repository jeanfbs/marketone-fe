define(["ajax"],function(e){$.fn.extend({oneDelete:function(i){$(this).off("click").on("click",function(){deleteIds=$(this).parents(".modal").find(".deleteIds input[type=hidden]"),aData=[],$.each(deleteIds,function(e,a){input=$(a),aData.push(input.val())}),new e.WebClient(i.url,"DELETE",JSON.stringify({listId:aData})).call().done(function(e){if(e.error)if("function"==typeof i.error)i.error(e);else{$("#modal-message").remove();var a=$('<div class="alert alert-danger alert-dismissible fade in" id="modal-message" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button></div>'),t='<p><i class="fa fa-exclamation-triangle fa-fw" aria-hidden="true"></i> '+e.result+"<p>";a.append(t),$(".modal-body").append(a)}else $(".all").prop("checked",!1),$(".modal").modal("hide"),"function"==typeof i.callback&&i.callback(e),window.location.href=i.redirect})})}}),$.fn.extend({delete:function(){$(this).off("click").on("click",function(){if(items=$(".check-id:checked"),0==items.lenght)return $(".modal").modal("hide"),!1;div=$(".deleteIds"),div.empty(),$.each(items,function(e,a){item=$("<input type='hidden' class='ids'>"),item.val(a.value),div.append(item)})})}}),$.fn.extend({confirmDelete:function(i){$(this).on("click",function(){deleteIds=$(this).parents(".modal").find(".deleteIds  input[type=hidden]"),aData=[],$.each(deleteIds,function(e,a){input=$(a),aData.push(input.val())}),$.ajax({type:"DELETE",headers:{"content-type":"application/json","cache-control":"no-cache"},url:i.url,data:JSON.stringify({listId:aData}),dataType:"json",success:function(e){if(e.error)if("function"==typeof i.error)i.error(e);else{$("#modal-message").remove();var a=$('<div class="alert alert-danger alert-dismissible fade in" id="modal-message" role="alert"> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button></div>'),t='<p><i class="fa fa-exclamation-triangle fa-fw" aria-hidden="true"></i> '+e.result+"<p>";a.append(t),$(".modal-body").append(a)}else"function"==typeof i.callback&&i.callback(e),location.reload()}})})}}),$.fn.extend({showAlert:function(e,a){var t=$(this),i=$("<div></div>").addClass("alert alert-dismissible fade in").attr("role","alert"),n=$("<i></i>").addClass("fa fa-exclamation-triangle fa-fw").attr("aria-hidden","true"),d=$("<b></b>");"warn"==a?(i.addClass("alert-warning"),d.text("Atenção")):"erro"==a?(i.addClass("alert-danger"),d.text("Erro")):(n=$("<i></i>").addClass("fa fa-check fa-fw").attr("aria-hidden","true"),i.addClass("alert-success"),d.text(""));var l=$("<button></button>").attr({type:"button","data-dismiss":"alert","aria-label":"Close"}).addClass("close");l.append($("<span></span>").attr("aria-hidden","true").text("x")),i.append(l);var o=$("<p></p>");o.append(n).append(d).append(" ").append(e),i.append(o),t.prepend(i)}}),$.fn.extend({autoLoadAddress:function(){$(this).focusout(function(){cep=$(this).val(),$.ajax({method:"GET",url:"http://api.postmon.com.br/v1/cep/"+cep,dataType:"json",beforeSend:function(){$(".iconLoadCep").removeClass("hide")},complete:function(){$(".iconLoadCep").addClass("hide")},success:function(e){$("#callback").empty(),$("#logradouro").val(e.logradouro),$("#bairro").val(e.bairro),$("#cidade").val(e.cidade),$("#pais").val("Brasil");var a=e.estado_info.nome.toUpperCase().replace(" ","_");$("#estado").select2("val",[a,e.estado_info.nome])},error:function(e,a,t){$("#callback").text("Erro ao chamar o serviço de verificação de CEP")}})})}}),$.fn.extend({validate:function(){$(this).formValidation({framework:"bootstrap",icon:{valid:"",invalid:"",validating:""},locale:"pt_BR"})}})});