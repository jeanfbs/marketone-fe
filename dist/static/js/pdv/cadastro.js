define(["ajax","api"],function(a,t){var e={formatItem:function(a){return a.loading?a.text:"<div class='row'><div class='col-sm-1'><img src='"+a.imagem+"' width='75px'></div><div class='col-sm-11'><span class='select2-produto'>"+a.descricao+"</span><br><span class='select2-info text-muted'><strong>Categoria:</strong> "+a.categoria+"</span><span class='select2-info text-muted'><strong>Marca:</strong> "+a.marca+"</span><span class='select2-info text-muted'><strong>Unidade:</strong> "+a.medida+"</span></div></div>"},formatItemSelection:function(a){$("#spanCodigoBarra").text(a.codigoBarra),a.valorUnitario=isNaN(a.valorUnitario)?0:a.valorUnitario,$("#spanValorUnitario").attr("data-valor-unitario",a.valorUnitario).text(a.valorUnitario);var t=a.valorUnitario*parseInt($("#quantidade").val());return $("#spanTotalItem").text(t),$("#foto-produto").attr("src",a.imagem),a.descricao||a.text}};$(function(){$("#insertHeader").load("../../fragmentos/menu-navegacao.html"),$("#quantidade").focusout(function(){var a=parseFloat($("#spanValorUnitario").attr("data-valor-unitario"))*parseInt($("#quantidade").val());$("#spanTotalItem").text(a.toFixed(2))}),$("#busca-produto").select2({theme:"bootstrap",ajax:{url:t["pdv.pesquisa.produto"],dataType:"json",delay:250,data:function(a){return{value:a.term}},processResults:function(a,t){return{results:$.map(a,function(a){return a.id=a.codigoBarra,a.text=a.descricao,a})}},cache:!1},placeholder:"Buscar Produtos",escapeMarkup:function(a){return a},minimumInputLength:1,templateResult:e.formatItem,templateSelection:e.formatItemSelection})})});