define(["chart","api"],function(e,o){var n=function(a,e,o){var n={crossDomain:!0,headers:{"content-type":"application/json","cache-control":"no-cache"},dataType:"json"};return n.url=a,n.method=e,null!=o&&null!=o&&(n.data=o),$.ajax(n)},t=function(a){var o={};return $.each(a.serializeArray(),function(a,e){o[e.name]=e.value}),o};$(function(){$("#insertHeader").load("./fragments/header.html"),n(o["vendas.atual.dinheiro"],"GET").done(function(a){knobVendasDinheiro=new e.Knob("#vendas-dinheiro",a.value,d)}).fail(function(a){knobVendasDinheiro=new e.Knob("#vendas-dinheiro")}),n(o["vendas.atual.credito"],"GET").done(function(a){knobVendasCredito=new e.Knob("#vendas-credito",a.value,d)}).fail(function(a){knobVendasCredito=new e.Knob("#vendas-credito")}),n(o["vendas.atual.debito"],"GET").done(function(a){knobVendasDebito=new e.Knob("#vendas-debito",a.value,d)}).fail(function(a){knobVendasDebito=new e.Knob("#vendas-debito")}),n(o["vendas.acumulo.mes"],"GET").done(function(a){donutVendasAtuais=new e.Donut("donut-vendas-atuais",a)}).fail(function(a){donutVendasAtuais=new e.Donut("donut-vendas-atuais")}),n(o["vendas.semanal"],"GET").done(function(a){chartBarVendasSemanal=new e.BarChart("vendas-semanal",a,{barColors:["#FFEB3B","#FFC107","#FF9800"],labels:["Dinheiro","Cartão de Crédito","Cartão de Débito"]})}).fail(function(a){chartBarVendasSemanal=new e.BarChart("vendas-semanal")}),n(o["vendas.mensal"],"GET").done(function(a){chartBarVendasMensal=new e.BarChart("vendas-mensal",a,{barColors:["#FFEB3B","#FFC107","#FF9800","#FF5722"],labels:["Dinheiro","Cartão de Crédito","Cartão de Débito","Total"]})}).fail(function(a){chartBarVendasMensal=new e.BarChart("vendas-mensal")}),n(o["estoque.anual"],"GET").done(function(a){chartBarEstoqueAnual=new e.BarChart("estoque-anual",a,{barColors:["#4CAF50","#2196F3","#FF9800","#FF5722"],labels:["Entradas","Saidas","Saldo Final","Total do Estoque"]})}).fail(function(a){chartBarEstoqueAnual=new e.BarChart("estoque-anual")}).always(function(){chartBarEstoqueAnual.show();var a=new Date,e="01/2018 até "+("0"+(a.getMonth()+1)).slice(-2)+"/"+a.getFullYear();$("#lbPeriodoAnual").text(e)});$("#categoria").select2({placeholder:"Categoria",allowClear:!0,theme:"bootstrap"});$("#buscarIndicadoresEstoque").off("click").on("click",function(){var a=t($("#indicadoresForm"));n(o["estoque.indicadores.periodo"],"GET",a).done(function(a){$("#ajaxBuscaIndicadoresEstoqueError").addClass("hide"),$("#divIndicadores").hide().removeClass("hide").fadeIn(500),$("#spanMediaEstoque").text(a.media.toLocaleString()),$("#spanCoberturaEstoque").text(a.cobertura),$("#spanGiroEstoque").text(a.giro),$("#spanTempoReposicao").text(a.tempo_reposicao)}).fail(function(a){$("#ajaxBuscaIndicadoresEstoqueError").removeClass("hide"),$("#divIndicadores").addClass("hide")})}),$("#avaliarItem").off("click").on("click",function(){var a=t($("#indicadoresProdutoCategoriaForm"));n(o["estoque.indicadores.periodo.item"],"GET",a).done(function(a){$("#ajaxBuscaIndicadoresEstoqueItemError").addClass("hide"),$("#divIndicadoresItem").hide().removeClass("hide").fadeIn(500),$("#td-tipo").text(a.tipo),$("#td-produto").text(a.item),$("#td-quantidade").text(a.quantidade_atual),$("#td-unidade").text(a.unidade),$("#td-atualizacao").text(a.atualizacao),$("#spanMediaEstoqueItem").text(a.media.toLocaleString()),$("#spanCoberturaEstoqueItem").text(a.cobertura),$("#spanGiroEstoqueItem").text(a.giro),$("#spanTempoReposicaoItem").text(a.tempo_reposicao)}).fail(function(a){$("#ajaxBuscaIndicadoresEstoqueItemError").removeClass("hide"),$("#divIndicadoresItem").addClass("hide")})}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){switch($(a.target).attr("href")){case"#vendas":knobVendasDinheiro.show(),knobVendasCredito.show(),knobVendasDebito.show(),chartBarVendasSemanal.show(),chartBarVendasMensal.show(),donutVendasAtuais.show();break;case"#estoque":chartBarEstoqueAnual.show()}}),$('[data-toggle="tooltip"]').tooltip()});var d=function(a){return"R$ "+parseFloat(a).toLocaleString()}});